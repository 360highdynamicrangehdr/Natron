diff -ur oiio-Release-1.7.10-noc99math/src/include/OpenImageIO/fmath.h oiio-Release-1.7.10/src/include/OpenImageIO/fmath.h
--- oiio-Release-1.7.10-noc99math/src/include/OpenImageIO/fmath.h	2017-01-01 22:55:38.000000000 +0100
+++ oiio-Release-1.7.10/src/include/OpenImageIO/fmath.h	2017-01-26 11:28:37.000000000 +0100
@@ -50,6 +50,8 @@
 
 #pragma once
 
+#include "missing_math.h"
+
 #include <cmath>
 #include <limits>
 #include <typeinfo>
@@ -60,7 +62,6 @@
 #include "oiioversion.h"   /* Just for the OIIO_NAMESPACE stuff */
 #include "platform.h"
 #include "dassert.h"
-#include "missing_math.h"
 #include "simd.h"
 
 
Only in oiio-Release-1.7.10/src/include/OpenImageIO: fmath.h~
diff -ur oiio-Release-1.7.10-noc99math/src/include/OpenImageIO/imageio.h oiio-Release-1.7.10/src/include/OpenImageIO/imageio.h
--- oiio-Release-1.7.10-noc99math/src/include/OpenImageIO/imageio.h	2017-01-01 22:55:38.000000000 +0100
+++ oiio-Release-1.7.10/src/include/OpenImageIO/imageio.h	2017-01-26 11:28:37.000000000 +0100
@@ -49,6 +49,8 @@
 #  pragma warning (disable : 4251)
 #endif
 
+#include "missing_math.h"
+
 #include <vector>
 #include <string>
 #include <limits>
Only in oiio-Release-1.7.10/src/include/OpenImageIO: imageio.h~
diff -ur oiio-Release-1.7.10-noc99math/src/include/OpenImageIO/missing_math.h oiio-Release-1.7.10/src/include/OpenImageIO/missing_math.h
--- oiio-Release-1.7.10-noc99math/src/include/OpenImageIO/missing_math.h	2017-01-01 22:55:38.000000000 +0100
+++ oiio-Release-1.7.10/src/include/OpenImageIO/missing_math.h	2017-01-26 11:26:08.000000000 +0100
@@ -38,6 +38,41 @@
 
 #pragma once
 
+// GCC doesn't import C99 math func into the std namespace, because
+// a few declarations are missing.
+// fix from https://github.com/jeremyhu/libcxx/commit/720feba4874d4ca3131753dc31af127e3c509c36
+#ifdef __APPLE__
+#ifndef __APPLE_BAD_MATH_H
+# if __has_include(<Availability.h>)
+#  include <Availability.h>
+#  if __MAC_OS_X_VERSION_MAX_ALLOWED < 1070
+#    define __APPLE_BAD_MATH_H 1
+#  else
+#    define __APPLE_BAD_MATH_H 0
+#  endif
+# else
+#  define __APPLE_BAD_MATH_H 1
+# endif
+#endif
+
+# if __APPLE_BAD_MATH_H
+/* These prototypes are incorrectly omitted from <math.h> on Snow Leopard despite being available */
+extern "C" {
+    extern long long int llrintl(long double);
+    extern long long int llrint(double);
+    extern long long int llrintf(float);
+
+    extern long long int llroundl(long double);
+    extern long long int llround(double);
+    extern long long int llroundf(float);
+}
+# endif
+#if OIIO_CPLUSPLUS_VERSION >= 11
+// import C99 math into std:: in libstdc++ (it won't harm libc++)
+#define _GLIBCXX_USE_C99_MATH_TR1 1
+#endif
+#endif // __APPLE__
+
 #include <cmath>
 
 #include "oiioversion.h"   /* Just for the OIIO_NAMESPACE stuff */
Only in oiio-Release-1.7.10/src/include/OpenImageIO: missing_math.h~
diff -ur oiio-Release-1.7.10-noc99math/src/include/OpenImageIO/typedesc.h oiio-Release-1.7.10/src/include/OpenImageIO/typedesc.h
--- oiio-Release-1.7.10-noc99math/src/include/OpenImageIO/typedesc.h	2017-01-01 22:55:38.000000000 +0100
+++ oiio-Release-1.7.10/src/include/OpenImageIO/typedesc.h	2017-01-26 11:27:12.000000000 +0100
@@ -47,6 +47,8 @@
 #define NULL 0
 #endif
 
+#include "missing_math.h"
+
 #include <limits>
 #include <cmath>
 #include <cstddef>
Only in oiio-Release-1.7.10/src/include/OpenImageIO: typedesc.h~
